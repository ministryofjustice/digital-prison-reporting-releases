version: 2.1

orbs:
  reporting: ministryofjustice/hmpps-reporting@dev:28a322000ba2e59765cba211702f374780ee6f8d

parameters:
  project:
    type: string
    default: ""
  release_tag: 
    type: string
    default: ""

workflows:
  release:
    jobs:            
      - reporting/gradle_release:
          app: digital-prison-reporting-jobs
          sync_args: "--exclude '*' --include '*-all*jar'"
          release_ready: true
          dry_run: true
          notify_slack: false
          release_tag: v0.0.26
          project: digital-prison-reporting-java-template
          context:
            - hmpps-reporting-common
          filters:
            branches:
              only: /.*/
            tags:
              ignore: /.*/
